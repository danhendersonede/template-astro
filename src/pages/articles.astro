---
import { getCollection } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import ArticleCard from '@/components/article/ArticleCard.astro';
import { getPublishedArticles } from '@/utils';

const allArticles = await getCollection('articles');
const articles = getPublishedArticles(allArticles);
---

<Layout title="Articles" description="Browse all articles and tutorials">
  <div class="articles-page">
    <header class="page-header">
      <h1>Articles</h1>
      <p class="subtitle">
        Explore {articles.length}
        {articles.length === 1 ? 'article' : 'articles'} about web development, programming,
        and technology
      </p>
    </header>

    {
      articles.length === 0 ? (
        <div class="no-articles">
          <p>No articles published yet. Check back soon!</p>
        </div>
      ) : (
        <div class="articles-grid">
          {articles.map(article => (
            <ArticleCard article={article} />
          ))}
        </div>
      )
    }
  </div>
</Layout>

<style>
  .articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 2rem;
  }

  @media (min-width: 640px) {
    .articles-grid {
      grid-template-columns: 1fr;
    }
  }

  .no-articles {
    text-align: center;
    padding: 4rem 1rem;
    color: #6b7280;
  }
</style>
