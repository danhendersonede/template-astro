---
import { siteConfig } from '@/config/site';

export interface Props {
  showSocial?: boolean;
  showNav?: boolean;
  copyright?: string;
}

const {
  showSocial = true,
  showNav = true,
  copyright = `Â© ${new Date().getFullYear()} ${siteConfig.name}. All rights reserved.`,
} = Astro.props;

type SocialLink = { name: string; url: string; icon: string };

const socialLinks = [
  siteConfig.social.github && {
    name: 'GitHub',
    url: `https://github.com/${siteConfig.social.github}`,
    icon: 'github',
  },
  siteConfig.social.linkedin && {
    name: 'LinkedIn',
    url: `https://linkedin.com/in/${siteConfig.social.linkedin}`,
    icon: 'linkedin',
  },
].filter((link): link is SocialLink => Boolean(link));
---

<footer class="footer">
  <div class="footer-container">
    <div class="footer-content">
      <!-- Branding section -->
      <div class="footer-section footer-brand">
        <a href="/" class="footer-logo">
          {siteConfig.name}
        </a>
        <p class="footer-description">
          {siteConfig.description}
        </p>
      </div>

      <!-- Navigation section -->
      {
        showNav && siteConfig.nav.length > 0 && (
          <div class="footer-section">
            <h3 class="footer-heading">Navigation</h3>
            <ul class="footer-links">
              {siteConfig.nav.map(item => (
                <li>
                  <a href={item.href} class="footer-link">
                    {item.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        )
      }

      <!-- Social section -->
      {
        showSocial && socialLinks.length > 0 && (
          <div class="footer-section">
            <h3 class="footer-heading">Connect</h3>
            <ul class="footer-social">
              {socialLinks.map(link => (
                <li>
                  <a
                    href={link.url}
                    class="footer-social-link"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label={`Visit our ${link.name}`}
                  >
                    {link.name}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        )
      }
    </div>

    <!-- Bottom section -->
    <div class="footer-bottom">
      <p class="footer-copyright">{copyright}</p>
      <p class="footer-credits">
        Built with <a
          href="https://astro.build"
          target="_blank"
          rel="noopener noreferrer"
          class="footer-link">Astro</a
        >
      </p>
    </div>
  </div>
</footer>

<style>
  .footer {
    background-color: #111827;
    color: #d1d5db;
    margin-block-start: auto;
  }

  .footer-container {
    max-inline-size: 1200px;
    margin-inline: auto;
    padding-block-start: clamp(2rem, 5vw, 3rem);
    padding-block-end: clamp(1rem, 2vw, 1.5rem);
    padding-inline: clamp(1rem, 4vw, 2rem);
  }

  .footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
    gap: clamp(1.5rem, 4vw, 3rem);
    margin-block-end: clamp(1.5rem, 3vw, 2rem);
    padding-block-end: clamp(1.5rem, 3vw, 2rem);
    border-block-end: 1px solid #374151;
  }

  .footer-section {
    display: flex;
    flex-direction: column;
    gap: clamp(0.75rem, 2vw, 1rem);
  }

  .footer-brand {
    max-inline-size: 350px;
    grid-column: 1 / -1;
  }

  @media (min-width: 48rem) {
    .footer-content {
      grid-template-columns: 2fr 1fr 1fr;
    }

    .footer-brand {
      grid-column: auto;
    }
  }

  .footer-logo {
    font-size: clamp(1.125rem, 2vw + 0.5rem, 1.25rem);
    font-weight: 700;
    color: #ffffff;
    text-decoration: none;
    display: inline-block;
    margin-block-end: 0.5rem;
    transition: color 0.2s;
  }

  .footer-logo:hover,
  .footer-logo:focus {
    color: #818cf8;
  }

  .footer-description {
    font-size: clamp(0.8125rem, 1.5vw + 0.5rem, 0.875rem);
    line-height: 1.5;
    color: #9ca3af;
    margin: 0;
  }

  .footer-heading {
    font-size: clamp(0.8125rem, 1.5vw + 0.5rem, 0.875rem);
    font-weight: 600;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-block-start: 0;
    margin-block-end: 0.75rem;
    margin-inline: 0;
  }

  .footer-links,
  .footer-social {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: clamp(0.375rem, 1vw, 0.5rem);
  }

  .footer-link {
    color: #d1d5db;
    text-decoration: none;
    font-size: clamp(0.8125rem, 1.5vw + 0.5rem, 0.875rem);
    transition: color 0.2s;
    display: inline-block;
  }

  .footer-link:hover,
  .footer-link:focus {
    color: #818cf8;
  }

  .footer-social-link {
    color: #d1d5db;
    text-decoration: none;
    font-size: clamp(0.8125rem, 1.5vw + 0.5rem, 0.875rem);
    transition: color 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .footer-social-link:hover,
  .footer-social-link:focus {
    color: #818cf8;
  }

  .footer-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: clamp(0.75rem, 2vw, 1rem);
    padding-block-start: clamp(0.75rem, 2vw, 1rem);
  }

  .footer-copyright,
  .footer-credits {
    font-size: clamp(0.8125rem, 1.5vw + 0.5rem, 0.875rem);
    color: #9ca3af;
    margin: 0;
  }

  .footer-credits a {
    color: #818cf8;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
  }

  .footer-credits a:hover,
  .footer-credits a:focus {
    color: #a5b4fc;
  }

  /* Mobile adjustment */
  @media (max-width: 30rem) {
    .footer-bottom {
      flex-direction: column;
      text-align: center;
      gap: 0.5rem;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .footer-logo,
    .footer-link,
    .footer-social-link {
      transition: none;
    }
  }
</style>
